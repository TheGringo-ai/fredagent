<section class="control-panel">

    <div class="control-block">
        <h3>🧠 Auto Plan Builder</h3>
        <p class="helper-text">Enter a goal and let the AI generate, diagnose, and patch a plan automatically.</p>
        <form onsubmit="autoPlan(event)">
            <input type="text" id="goal" placeholder="Enter goal for auto plan" required>
            <button type="submit">⚙️ Run Auto Plan</button>
            <span class="loading" style="display:none;">Loading...</span>
            <div id="error-patch" style="color:red;"></div>
            <div style="margin-top:10px;">
                <button type="button" onclick="toggleOutput()">📂 Toggle Output</button>
                <button type="button" onclick="copyOutput()">📋 Copy Output</button>
            </div>
            <pre id="patch-result" class="output-area" style="display:none;"></pre>
        </form>
    </div>

</section>
<script>
    function toggleOutput() {
        const output = document.getElementById("patch-result");
        output.style.display = output.style.display === "none" ? "block" : "none";
    }

    function copyOutput() {
        const text = document.getElementById("patch-result").textContent;
        navigator.clipboard.writeText(text).then(() => {
            alert("Output copied to clipboard!");
        }, (err) => {
            alert("Failed to copy text: " + err);
        });
    }
</script>